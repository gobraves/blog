<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="To be my hero">

    <title>输入/输出 - GoBraves Blog</title>

    <link rel="canonical" href="http://yourdomain.com/2015/07/04/Java-io/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">GoBraves Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
                <li>
                    <a href="/tag/">Tags</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/home-bg2.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>输入/输出</h1>
                    
                    <span class="meta">Posted  on July 4, 2015</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<h3 id="section">输入/输出</h3>
<ol>
  <li>文件系统和路径</li>
  <li>文件和目录的处理及操作</li>
  <li>输入/输出流</li>
  <li>读取二进制数据</li>
  <li>写入二进制数据</li>
  <li>写入文本</li>
  <li>读取文本</li>
  <li>用PrintStream记录日志</li>
  <li>随机访问文件</li>
  <li>对象序列化</li>
</ol>

<h4 id="section-1">1.文件系统和路径</h4>
<ol>
  <li>文件系统中的对象可以用一条路径作为惟一的识别</li>
  <li>路径分为绝对路径和相对路径</li>
  <li>文件或者目录一般用java.io.File对象表示，java7中，用java.nio.file.Path接口代替它</li>
</ol>

<blockquote>
  <p>FileSystem类 :</p>
</blockquote>

<blockquote>
  <ul>
    <li><code>FileSystems.getDefault()</code>获取当前的文件系统</li>
    <li><code>getSeparator()</code>获取当前系统的分隔符</li>
    <li><code>getRootDirectories()</code>返回一个Iterable,遍历根目录
      <ol>
        <li>创建path</li>
        <li><code>FileSystems.getPath(...)</code></li>
        <li><code>Path path = Paths.get(...)</code></li>
        <li><code>getNameCount()</code>,<code>getName(int index)</code>从0开始</li>
        <li>path其他方法<code>getFileName()</code>,<code>getParent()</code>,<code>getRoot()</code></li>
      </ol>
    </li>
  </ul>
</blockquote>

<h4 id="section-2">2.文件和目录的处理及操作</h4>
<ol>
  <li>创建和删除文件及目录 <br />
<code>createFile()</code>,<code>createDirectory()</code>,<code>delete()</code>,<code>deleteIfExists()</code>,如果用<code>delteIfExists()</code>删除目录，则目录必须为空</li>
  <li>获取目录的对象<br />
使用newDirectoryStream()方法,<code>public static DirectoryStream&lt;Path&gt; newDirectoryStream(Path path)</code></li>
</ol>

<hr />
<blockquote>
  <p>代码实例：</p>
</blockquote>

<pre><code>&gt;	    Path parent = Paths.get("/home/simple_chen/下载");
    	try (DirectoryStream&lt;Path&gt; children = Files.newDirectoryStream(parent)){
    	  for (Path child : children) {
       	  System.out.println(child);
          }
        } catch (IOException e) {
         		e.printStackTrace();
        }       ---        
</code></pre>

<ol>
  <li>复制和文件移动
    <ol>
      <li>复制
    <code>public static Path copy(Path source, Path target, CopyOption...options) throws java.io.IOException</code> <br />
    CopyOption是java.nio.file包的一个接口。<code>StandardCopyOption</code>是CopyOption接口的一个实现。<br />
    StandardCopyOption有三个复制选项:
        <ul>
          <li>ATOMIC_MOVE</li>
          <li>COPY_ATTRIBUTES</li>
          <li>REPLACE_EXISTING</li>
        </ul>
      </li>
      <li>移动
<code>public static Path move(Path source, Path target, CopyOption...options) throws java.io.IOException</code></li>
    </ol>
  </li>
  <li>文件读取和写入
 对于较小的文件，File类提供了从二进制文件和文本文件读取和写入的方法
    <ul>
      <li>二进制<br />
 <code>public static byte[] readAllBytes(Path path) throws java.io.IOException</code><br />
 <code>public static write(Path path, byte[] bytes, OpenOption...options) throws java.io.IOException</code></li>
      <li>文本文件<br />
 <code>public static List&lt;String&gt; readAllLines(Path path, java.nio.charset.Charset charset) throws java.io.IOException</code>
 <code>public static write(Path path, java.lang.Iterable&lt;? extends CharSequence&gt; lines, java.nio.charset.Charset charset, OpenOption...options) throws java.io.IOException</code></li>
    </ul>

    <blockquote>
      <p>这两个方法都重载了OpenOption,第二个方法还重载了一个Charset</p>

      <ul>
        <li>StandardOpenOption实现了OpenOption接口:
          <ul>
            <li>APPEND</li>
            <li>CREATE</li>
            <li>CREATE_NEW</li>
            <li>DELETE_ON_CLOSE</li>
            <li>DSYNC</li>
            <li>READ</li>
            <li>SPARSE</li>
            <li>SYNC</li>
            <li>TRUNCATE_EXISTING</li>
            <li>WRITE</li>
          </ul>
        </li>
      </ul>
    </blockquote>

    <blockquote>
      <ul>
        <li>java.nio.charset.Charset是一个表示字符集的抽象类。需要指定在将<strong>字符编码成字节</strong>和将<strong>字节解码成字符</strong>时要使用的字符集。
 创建一个charset <br />
 <code>Charset usAscii = Charset.forName("US-ASCII")</code></li>
      </ul>
    </blockquote>

    <blockquote>
      <p><strong><em>代码实例:</em></strong></p>

      <pre><code> 	Path textfile = Paths.get("/home/simple_chen/textfile");
 	Charset charset = Charset.forName("US-ASCII");
 	String line1 = "Easy read and write";
 	String line2 = "Easy read and write";
 	List&lt;String&gt; lines = Arrays.asList(line1,line2);
 	try {
     	Files.write(textfile,lines,charset);
 	} catch (IOException e) {
     	e.printStackTrace();
 	}  

 	List&lt;String&gt; linesRead = null;
 	try {
     	linesRead = Files.readAllLines(textfile, charset);
 	} catch (IOException e) {
     	e.printStackTrace();
 	}  

 	if(linesRead != null) {
     	for (String str : linesRead) {
         	System.out.println(str);
     	}
 	}	   
</code></pre>
    </blockquote>
  </li>
</ol>

<h4 id="section-3">3. 输入/输出流</h4>
<ol>
  <li>What is Stream?<br />
个人理解：用一种统一的方式使的数据在不同的接收装置中传输的机制吧。打个比方，流就是管道，接收装置就是一个个“水库”，而管道将各个水库连接起来。</li>
  <li>流的分类<br />
根据数据流向，可分为输入流和输出流，而数据又可以分为二进制数据和字符，因此每种又可分为两种，即：
         - Reader: 从一个接收装置中读取字符的流
         - Writer: 将一个字符写入一个接收装置的流
         - InputStream: 从一个接收装置中读取二进制数据的流
         - OutputStream: 将二进制数据写入到一个接收装置的流</li>
  <li>流的一般操作顺序：
         1. 创建一个流。得到的对象已经处于打开状态，因此没有open方法可以调用
         2. 执行读取或者写入操作
         3. 通过调用close方法关闭流。由于当前大多数流都实现了java.lang.AutoCloseable接口，因此可以利用try-with-resources语句创建一个流，并且让流自动关闭</li>
  <li>使用流的好处
 			1. 为数据的读取和写入定义了方法，无论数据源还是数据目标都可以使用。
 			2. 为了连接一个专门的接收装置，利用java.nio.file.Files类提供的方法，正确构造流即可。</li>
</ol>

<h4 id="section-4">4. 读取二进制数据</h4>



                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/07/03/JavaFx-Property-and-Bindings/" data-toggle="tooltip" data-placement="top" title="Propertys and Bindings">&larr; Previous Post</a>
                    </li>
                    
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <!-- 
                     -->
                    
                    <li>
                        <a href="https://github.com/gobraves">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; GoBraves Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
